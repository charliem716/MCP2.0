# BUG-124: ESLint warnings and errors in multiple files

**Status**: Open  
**Severity**: Medium  
**Priority**: P3 (Low)  
**Component**: Code Quality / Linting  
**Reported Date**: 2025-07-27  
**Reporter**: STEP-3.2 Implementation  
**Assignee**: Unassigned

## Summary

ESLint reports 1 error and 28 warnings across multiple files, primarily related to TypeScript type safety and code complexity.

## Description

Running `npm run lint` shows:
- 1 error: Use RegExp#exec() instead of match
- 28 warnings including:
  - Unsafe assignments and member access on `any` values
  - Unnecessary conditionals
  - High cyclomatic complexity
  - Too many statements in methods

## Steps to Reproduce

1. Run `npm run lint`
2. Observe 29 problems (1 error, 28 warnings)

## Expected Behavior

Code should pass linting with no errors or warnings.

## Actual Behavior

Multiple linting issues across:
- `/src/mcp/state/event-cache/manager.ts`
- `/src/mcp/tools/components.ts`
- `/src/mcp/tools/controls.ts`
- `/src/mcp/tools/status.ts`
- `/src/qrwc/officialClient.ts`

## Environment

- **OS**: macOS 24.5.0
- **Node.js Version**: As configured in project
- **Project Version/Commit**: feature/step-3-2-config-validation branch

## Error Logs/Stack Trace

Key issues:
```
/src/mcp/state/event-cache/manager.ts
  1547:34  error    Use the `RegExp#exec()` method instead
  1558:3   warning  Async method 'emergencyEviction' has no 'await' expression
  1904:20  warning  Unnecessary conditional, the types have no overlap

/src/mcp/tools/components.ts
  87:11  warning  Unsafe assignment of an `any` value
  
/src/mcp/tools/status.ts
  117:30  warning  Method 'parseStatusResponse' has a complexity of 33. Maximum allowed is 20
```

## Root Cause Analysis

- Legacy code patterns not updated to current ESLint rules
- Complex methods that need refactoring
- Missing type annotations leading to `any` types

## Proposed Solution

1. Replace string.match() with RegExp.exec()
2. Add proper TypeScript types to eliminate `any`
3. Refactor complex methods to reduce cyclomatic complexity
4. Review and fix unnecessary conditionals

## Workaround

Use `npm run lint:fix` to auto-fix some issues, but manual fixes needed for most.

## Related Issues

- Related to overall code quality improvements

## Acceptance Criteria

- [ ] Zero ESLint errors
- [ ] Significantly reduced warnings (target < 5)
- [ ] All methods below complexity threshold
- [ ] No unsafe `any` usage

---

**Labels**: bug, code-quality, eslint, medium  
**Milestone**: Technical Debt