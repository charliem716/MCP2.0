# BUG-035: Duplicate ChangeGroupManager Implementations

**Status**: Open  
**Severity**: High  
**Priority**: P1 (High)  
**Component**: State Management / Change Group Manager  
**Reported Date**: 2025-01-20  
**Reporter**: Phase-2 Audit  
**Assignee**: Unassigned  

## Summary
Multiple duplicate implementations of ChangeGroupManager exist across the codebase, violating DRY principles and causing maintenance overhead.

## Description
The audit revealed that ChangeGroupManager functionality is duplicated in multiple locations:
- Main implementation in `src/mcp/state/change-group-manager.ts`
- Duplicate in `src/mcp/state/change-group/manager.ts`
- Partial duplicate in `src/mcp/state/change-group/index.ts`

This duplication leads to:
- Confusion about which implementation to use
- Risk of bug fixes being applied to only one version
- Increased maintenance burden
- Potential for divergent behavior between implementations

## Steps to Reproduce
1. Navigate to `src/mcp/state/change-group-manager.ts`
2. Navigate to `src/mcp/state/change-group/manager.ts`
3. Compare the implementations
4. Expected result: Single authoritative implementation
5. Actual result: Multiple duplicate implementations with slight variations

## Expected Behavior
There should be a single, authoritative implementation of ChangeGroupManager that all parts of the codebase reference.

## Actual Behavior
Multiple files contain nearly identical ChangeGroupManager implementations, creating confusion and maintenance overhead.

## Environment
- **OS**: All
- **Node.js Version**: v20.x
- **Project Version/Commit**: bug/001-fix branch

## Root Cause Analysis
- **File(s)**: 
  - `src/mcp/state/change-group-manager.ts`
  - `src/mcp/state/change-group/manager.ts`
  - `src/mcp/state/change-group/index.ts`
- **Cause**: Likely result of incomplete refactoring or merge conflicts

## Proposed Solution
```typescript
// 1. Keep only the main implementation in src/mcp/state/change-group-manager.ts
// 2. Remove duplicate directories
// 3. Update all imports to use the single implementation
// 4. Add tests to ensure single source of truth
```

## Test Cases
- [ ] Unit test verifying single ChangeGroupManager implementation
- [ ] Integration test confirming all imports resolve correctly
- [ ] Build verification after cleanup

## Related Issues
- Related to: Code organization and maintainability

## Acceptance Criteria
- [ ] Only one ChangeGroupManager implementation exists
- [ ] All imports updated to use single implementation
- [ ] No functionality lost during consolidation
- [ ] Tests pass after consolidation

---
**Labels**: bug, state-management, high-priority, code-duplication