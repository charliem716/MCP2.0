# BUG-069: Change Group tools lack error handling documentation

**Status**: Open  
**Severity**: Medium  
**Priority**: P2 (Medium)  
**Component**: Change Group Tools  
**Reported Date**: 2025-01-22  
**Reporter**: Code Analysis  
**Assignee**: Unassigned  

## Summary
None of the Change Group tool descriptions explain error handling behavior, leaving users uncertain about what exceptions to expect and handle.

## Description
All Change Group tools can throw errors for various conditions (group not found, invalid parameters, connection issues), but the descriptions don't mention this. Users need to know what errors to expect so they can handle them appropriately in their applications.

## Steps to Reproduce
1. Review any Change Group tool description
2. Look for information about error conditions
3. Expected: Find documentation about possible errors
4. Actual: No error information provided

Example error scenarios not documented:
- Polling a non-existent group
- Destroying an already destroyed group  
- Adding controls when disconnected
- AutoPoll with invalid interval

## Expected Behavior
Tool descriptions should include common error conditions:
- Parameter validation errors
- Group not found errors
- Connection/communication errors
- State-related errors (e.g., can't poll empty group)

## Actual Behavior
Descriptions focus only on successful operation without mentioning failure modes.

## Environment
- **OS**: All
- **Node.js Version**: All supported versions
- **Project Version/Commit**: Current main branch
- **Q-SYS Core Version**: All

## Error Logs/Stack Trace
Example errors users might encounter:
```
Error: Change group ID required
Error: Change group not found: test-group
Error: Control not found: InvalidControl
Error: Q-SYS connection lost
```

## Root Cause Analysis
- **File(s)**: src/mcp/tools/change-groups.ts (all tool descriptions)
- **Line(s)**: All constructor super() calls
- **Cause**: Descriptions focus on happy path without documenting error conditions

## Proposed Solution
Add error information to descriptions. Example for poll_change_group:
```typescript
"Poll a change group for control value changes since last poll. Returns only controls whose values changed. First poll returns all controls as changed. Example: {groupId:'mixer-controls'} returns array of changed controls with Name, Value, and String properties. Throws error if group doesn't exist or connection is lost. Use for efficient UI updates or state monitoring."
```

Or add a standard error section to all descriptions:
```typescript
"... Common errors: 'Change group not found' if groupId doesn't exist, 'Connection lost' if Q-SYS is disconnected."
```

## Workaround
Users must discover error conditions through trial and error or code inspection.

## Test Cases
- [ ] Each tool description mentions possible errors
- [ ] Error documentation is accurate
- [ ] Examples of error handling in documentation
- [ ] Consistent error documentation format

## Related Issues
- Related to: All Change Group tools
- Similar to: General tool documentation improvements

## Additional Context
- Affects developer experience and error handling robustness
- May lead to unhandled exceptions in user code
- Particularly important for automation scenarios

## Acceptance Criteria
- [ ] All Change Group tools document their error conditions
- [ ] Error descriptions are accurate and helpful
- [ ] Consistent format across all tools
- [ ] Documentation includes error handling examples

## Notes
Consider creating a standard template for tool descriptions that includes an errors section. This issue likely affects other tools beyond Change Groups.

---
**Labels**: bug, change-groups, documentation, developer-experience  
**Milestone**: Documentation Updates