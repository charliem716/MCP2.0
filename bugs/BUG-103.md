# BUG-103: Extensive Test Suite Failures (78% Failure Rate)

## Summary
The test suite has a 78% failure rate with 61 out of 79 test suites failing and 1251 out of 1597 individual tests failing. This indicates systemic issues with the test infrastructure.

## Severity
Critical

## Steps to Reproduce
1. Run `npm run test:coverage`
2. Observe widespread test failures

## Expected Behavior
- All tests should pass
- Test coverage should be above 80%
- No import/module errors

## Actual Behavior
- 61/79 test suites failing (77% failure rate)
- 1251/1597 tests failing (78% failure rate)
- Coverage at 50.62% (below standard)
- Multiple import errors with `import.meta`

## Root Cause
Multiple issues identified:
1. Jest configuration using deprecated `ts-jest` globals
2. Module system conflicts (ESM vs CommonJS)
3. Import.meta usage in non-ESM context
4. Mock function expectation failures
5. Assertion failures in tool descriptions

## Proposed Solution
1. Update Jest configuration to latest ts-jest format
2. Fix module system configuration (ensure proper ESM support)
3. Replace import.meta usage or configure proper ESM support
4. Update test assertions to match current implementation
5. Fix mock expectations to align with actual behavior

## Code Location
- Jest configuration files
- Test files using `import.meta`
- Tool description tests
- Mock setup in various test files

## Related Issues
- Blocks verification of STEP-3.1 implementation
- Prevents reliable coverage measurement
- Makes it impossible to verify bug fixes