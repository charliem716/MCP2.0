# BUG-125: High complexity in validateEventCacheConfig function

**Status**: Open  
**Severity**: Medium  
**Priority**: P3 (Low)  
**Component**: Event Cache / Config Validator  
**Reported Date**: 2025-07-27  
**Reporter**: STEP-3.2 Audit  
**Assignee**: Unassigned

## Summary

The validateEventCacheConfig function exceeds ESLint complexity limits with a cyclomatic complexity of 47 (max allowed is 20) and 61 statements (max allowed is 25).

## Description

The function performs comprehensive validation but has become too complex for ESLint standards. This makes the code harder to maintain and test individual validation paths.

## Steps to Reproduce

1. Run `npm run lint`
2. Check output for `src/mcp/state/event-cache/config-validator.ts`
3. Observe complexity warnings

## Expected Behavior

Function should have complexity ≤ 20 and statements ≤ 25.

## Actual Behavior

- Complexity: 47
- Statements: 61

## Environment

- **OS**: macOS 24.5.0
- **Node.js Version**: As configured in project
- **Project Version/Commit**: feature/step-3-2-config-validation branch

## Error Logs/Stack Trace

```
/src/mcp/state/event-cache/config-validator.ts
  11:8  warning  Function 'validateEventCacheConfig' has too many statements (61). Maximum allowed is 25  max-statements
  11:8  warning  Function 'validateEventCacheConfig' has a complexity of 47. Maximum allowed is 20       complexity
```

## Root Cause Analysis

- **File(s)**: src/mcp/state/event-cache/config-validator.ts
- **Line(s)**: 11-175
- **Cause**: Single function handles all validation logic with many conditional branches

## Proposed Solution

Refactor into smaller validation functions:
- `validateMemoryLimits()`
- `validateEventLimits()`
- `validateRetention()`
- `validateDiskSpillover()`
- `validateCompression()`

## Workaround

Function works correctly despite complexity warnings.

## Related Issues

- BUG-124: Overall ESLint warnings

## Acceptance Criteria

- [ ] Function complexity ≤ 20
- [ ] Function statements ≤ 25
- [ ] All validation logic preserved
- [ ] All tests still pass

---

**Labels**: bug, code-quality, refactoring, medium  
**Milestone**: Technical Debt